<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@tim_hosgood">
    <meta name="twitter:title" content="Cauchy completion and profunctors // Tim Hosgood">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://thosgood.com/assets/images/me.jpg">

    <title>Cauchy completion and profunctors | Tim Hosgood</title>

    <link rel="stylesheet" href="/assets/css/global.css">
    <link rel="stylesheet" href="/assets/css/blog.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link rel="stylesheet" href="/assets/css/citations.css">

    <link rel="stylesheet" href="/assets/css/tachyons.css">
    <link rel="stylesheet" href="/assets/katex/katex.min.css">
</head>

  <body>

    <div id="header-wrapper" class="h3-ns w-100 flex items-center justify-center">
  <div id="header" class="w-60-ns w-80-m flex flex-wrap items-center">
    <div class="w-third-ns tl pb0-ns pb2 w-100">
      <span class="f4-ns f5"><a class="link" href="/">Tim Hosgood</a></span>
    </div>
    <div id="nav_bar" class="w-two-thirds-ns tr w-100">
      <ol class="fr-ns list ma0 pl0">
        <li class="ph2-ns ph1 dib">
          <a class="link f4-ns f5" href="/work/">Work</a>
        </li>
        <li class="ph2-ns ph1 dib">
          <a class="link f4-ns f5" href="/translations/">Translations</a>
        </li>
        <li class="ph2-ns ph1 dib">
          <a class="link f4-ns f5" href="/blog/">Blog</a>
        </li>
        <li class="pl2-ns pl1 dib">
          <a class="link f4-ns f5" href="/cv/">CV</a>
        </li>
      </ol>
    </div>
  </div>
</div>

    <div class="mw7 flex flex-column center">
      <div id="main" class="w-100 flex flex-wrap items-start lh-title mv3 ph4">
        
  <div id="post-nav" class="w-80-ns w-100">
    <!-- Display settings -->
    <ul id="colour-select" class="fl">
      <li>
        <button type="button" onclick="lightStyle()">
          Light
        </button>
      </li>
      <li>
        <button type="button" onclick="darkStyle()">
          Dark
        </button>
      </li>
    </ul>
    <ul id="font-select" class="fl">
      <li>
        <button type="button" onclick="sansStyle()">
          Sans
        </button>
      </li>
      <li>
        <button type="button" onclick="serifStyle()">
          Serif
        </button>
      </li>
    </ul>
    <!-- Navigation -->
    <a href="/blog/#2019-07-14-cauchy-completion-and-profunctors" class="fr f5">← Return to all posts</a>
  </div>
  <div id="post-content" class="w-80-ns ph3-ns w-100">
    <h1 id="post-title">Cauchy completion and profunctors</h1>
    <h2 id="post-part"></h2>
    <h6 id="post-date">14th July, 2019</h6>
    <div class="tag-list">
      <a href="/blog/tags/category-theory" rel="tag">category-theory</a>, <a href="/blog/tags/profunctors" rel="tag">profunctors</a>
    </div>
    <!-- Other posts in the same series -->
    
    <!-- Content -->
    <ol id="toc">
<li><a href="#bimodules">Bimodules</a></li>
<li><a href="#profunctors-distributors-bimodules-or-whatever">Profunctors, distributors, bimodules, or whatever</a></li>
<li><a href="#cauchy-completion">Cauchy completion</a></li>
<li><a href="#internal-categories">Internal categories</a></li>
<li><a href="#references">References</a></li>
</ol>
<p>An idea that came up in a few talks at CT2019 was that of ‘spans whose left leg is a left adjoint’. I managed (luckily) to get a chance to ask Mike Shulman a few questions about this, as well as post in <a href="https://www.matrix.to/#/#math.CT:matrix.org"><code>#math.CT:matrix.org</code></a>. What follows are some things that I learnt (mostly from [BD86]).</p>
<!-- more -->
<h1 id="bimodules">Bimodules</h1>
<a href="#post-title" class="toc-back">↟</a>
<p>A good place to begin is with the definition of a <em>bimodule</em>.</p>
<h2 id="classically">Classically</h2>
<p>Given rings <span class="math inline">R</span> and <span class="math inline">S</span>, we say that an abelian group <span class="math inline">M</span> is an <em><span class="math inline">(R,S)</span>-bimodule</em> if it is a left <span class="math inline">R</span>-module and a right <span class="math inline">S</span>-module <strong>in a compatible way</strong>: we ask that <span class="math inline">(rm)s=r(ms)</span>.</p>
<p>Thinking about this definition a bit (or maybe recalling an algebra class), we see that this is equivalent to asking that <span class="math inline">M</span> be a right module over <span class="math inline">R^{\text{op}}\otimes_{\mathbb{Z}}S</span> (or, equivalently, a left module over <span class="math inline">R\otimes_{\mathbb{Z}}S^{\text{op}}</span>), where <span class="math inline">R^{\text{op}}</span> is the <em>opposite</em> ring of <span class="math inline">R</span>, given by just ‘turning the multiplication around’.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<h2 id="categorically">Categorically</h2>
<p>Modulo a bunch of technical conditions on the categories involved,<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> a <em>bimodule</em> is a <span class="math inline">\mathcal{V}</span>-functor (i.e. a functor of <span class="math inline">\mathcal{V}</span>-enriched categories) <span class="math inline">\mathcal{C}^{\text{op}}\otimes\mathcal{D}\to\mathcal{V}</span>.</p>
<p>We can recover the previous definition similar to how we can recover the definition of an <span class="math inline">R</span>-module as an <span class="math inline">\mathsf{Ab}</span>-enriched functor <span class="math inline">R^{\text{op}}\to\mathsf{Ab}</span>. Or, taking <span class="math inline">\mathcal{V}=\mathsf{Vect}</span>, and <span class="math inline">\mathcal{C}=\mathbb{B}A</span>, <span class="math inline">\mathcal{D}=\mathbb{B}B</span>, with <span class="math inline">A</span> and <span class="math inline">B</span> both vector spaces, we recover the notion of a vector space with a left <span class="math inline">A</span>-action and a right <span class="math inline">B</span>-action.</p>
<p>A fundamental example that seems a bit different from this algebraic one, however, arises when we take <span class="math inline">\mathcal{V}=\mathsf{Set}</span> and <span class="math inline">\mathcal{C}=\mathcal{D}</span> to be arbitrary (small) categories. Then the hom functor <span class="math inline">\mathcal{C}(-,-)\colon\mathcal{C}^{\text{op}}\times\mathcal{C}\to\mathsf{Set}</span> is a bimodule. This suggests that we should maybe somehow think of bimodules as generalised hom functors, where the objects can live in a different category.</p>
<p>As a small aside, there is some hot debate about whether to use <span class="math inline">\mathcal{C}^{\text{op}}\otimes\mathcal{D}\to\mathcal{V}</span> or <span class="math inline">\mathcal{C}\otimes\mathcal{D}^{\text{op}}\to\mathcal{V}</span>, and although the first seems more natural (in that it corresponds to the way we write hom functors), the second is slightly nicer in that functors <span class="math inline">\mathcal{C}\to\mathcal{D}</span> give you profunctors by composition with the <strong>covariant</strong> Yoneda embedding, as opposed to the contravariant one. But the two are formally dual, so it’s really not the biggest of issues.</p>
<h1 id="profunctors-distributors-bimodules-or-whatever">Profunctors, distributors, bimodules, or whatever</h1>
<a href="#post-title" class="toc-back">↟</a>
<p>Of course, lots of people have different preferences for names, but a <em>profunctor</em> is (using the convention of Borceux and Dejean) a functor <span class="math inline">\mathcal{D}^{\text{op}}\times\mathcal{C}\to\mathsf{Set}</span>. People often write such a thing as <span class="math inline">\mathcal{C}\nrightarrow\mathcal{D}</span>. We can define their compositions via colimits or coends:</p>
<p><span class="math display">Q\circ P=\int^{d\in\mathcal{D}}P(d,-)\otimes Q(-,d)</span></p>
<p>(although we don’t really care so much about this in this post).</p>
<p><strong>Edit.</strong> We talk about this a bit more in <a href="/blog/2019/09/05/day-convolution-part-3.html">Part 3 of the series on Day convolution</a>.</p>
<h2 id="yoneda">Yoneda</h2>
<p>Every functor <span class="math inline">F\colon\mathcal{C}\to\mathcal{D}</span> gives a profunctor <span class="math inline">F^*\colon\mathcal{C}\nrightarrow\mathcal{D}</span> by setting</p>
<p><span class="math display">F^*(d,c) = \mathcal{D}(d,Fc),</span></p>
<p>and <span class="math inline">F^*</span> has a right adjoint <span class="math inline">F_*\colon\mathcal{D}\nrightarrow\mathcal{C}</span> given by</p>
<p><span class="math display">F_*(c,d) = \mathcal{D}(Fc,d),</span></p>
<p>where we define adjunctions of profunctors using the classical notion of natural transformations.</p>
<p>If we write <span class="math inline">\mathbb{1}</span> to mean the category with one object and one (identity) (endo)morphism then any (small) category <span class="math inline">\mathcal{C}</span> can be identified with the functor category <span class="math inline">\mathsf{Fun}(\mathbb{1},\mathcal{C})</span>, and the presheaf category <span class="math inline">\hat{\mathcal{C}}:=\mathsf{Fun}(\mathcal{C}^{\text{op}},\mathsf{Set})</span> is just the category <span class="math inline">\mathsf{Profun}(\mathbb{1},\mathcal{C})</span>. Then the Yoneda embedding is the inclusion</p>
<p><span class="math display">\mathsf{Fun}(\mathbb{1},\mathcal{C})\to\mathsf{Profun}(\mathbb{1},\mathcal{C})</span></p>
<p>given by <span class="math inline">F\mapsto F^*</span>.</p>
<h2 id="recovering-functors">Recovering functors</h2>
<p><strong>Theorem.</strong> A profunctor <span class="math inline">\mathbb{1}\nrightarrow\mathcal{C}</span> is a functor (via Yoneda<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>) if and only if it admits a right adjoint. More generally, a profunctor <span class="math inline">\mathcal{A}\nrightarrow\mathcal{C}</span>, for any small category <span class="math inline">\mathcal{A}</span>, is a functor (via Yoneda) if and only if it admits a right adjoint.</p>
<p><strong>Proof.</strong> [Theorem 2, BD86].</p>
<p>We will come back to this fact later.</p>
<h1 id="cauchy-completion">Cauchy completion</h1>
<a href="#post-title" class="toc-back">↟</a>
<p>The <em>Cauchy completion</em> of a (small) category <span class="math inline">\mathcal{C}</span> can be defined in many ways (as described in [BD86]), but we pick the following: the Cauchy completion of <span class="math inline">\mathcal{C}</span> is the full subcategory <span class="math inline">\overline{\mathcal{C}}</span> of <span class="math inline">\hat{\mathcal{C}}:=\mathsf{Fun}(\mathcal{C}^{\text{op}},\mathsf{Set})</span> spanned by <em>absolutely presentable</em><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> presheaves.</p>
<p>The idea of Cauchy completeness for a category is in some sense meant to mirror that of Cauchy completeness of real numbers: if we think of a metric space as a category enriched over (the poset of) non-negative real numbers, then we recover this analytic notion (see [Example 3, BD86]).</p>
<p><strong>Lemma.</strong> A presheaf <span class="math inline">\mathcal{F}\in\hat{\mathcal{C}}</span> is absolutely presentable if and only if it admits a right adjoint.</p>
<p><strong>Proof.</strong> [Propositions 2 and 4, BD86].</p>
<h1 id="internal-categories">Internal categories</h1>
<a href="#post-title" class="toc-back">↟</a>
<p>Recall that [Theorem 2, BD86] tells us that the profunctors that are functors (via Yoneda) are exactly those that admit right adjoints (which, by [Propositions 2 and 4, BD86], are exactly those (in the case where <span class="math inline">\mathcal{A}=\mathbb{1}</span>) that are in the Cauchy completion of <span class="math inline">\mathcal{C}</span>).</p>
<p>Now for what motivated me to write this post: something I saw in <a href="https://twitter.com/8ryceClarke">Bryce Clarke</a>’s talk <a href="http://conferences.inf.ed.ac.uk/ct2019/slides/63.pdf">Internal lenses as monad morphisms</a> at CT2019.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>Given some category <span class="math inline">\mathcal{E}</span> with pullbacks, we can define an <em>internal category of <span class="math inline">\mathcal{E}</span></em> as a monad in the 2-category <span class="math inline">\mathsf{Span}(\mathcal{E})</span>, but it is <strong>not</strong> the case that internal functors are just (colax) morphisms of monads: <strong>we need to require that the 1-cell admits a right adjoint</strong> (which reduces to asking that the left leg of the corresponding span is an identity/isomorphism).</p>
<p>This is now not so much of a surprising condition, since we’ve already seen that this left-adjoint condition is what ensures that profunctors are actually functors!</p>
<p>What happens then, we may well ask, if we don’t ask for this condition? We recover the idea of a <strong>Mealy morphism</strong>.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<h1 id="references">References</h1>
<a href="#post-title" class="toc-back">↟</a>
<ul>
<li>[BD86] F. Borceux and D. Dejean. “<a href="http://www.numdam.org/article/CTGDC_1986__27_2_133_0.pdf">Cauchy completion in category theory</a>”. Cahiers de Topologie et Géométrie Différentielle Catégoriques, Volume 27 (1986) no. 2, pp. 133-146.</li>
<li>J. Baez, <a href="https://golem.ph.utexas.edu/category/2008/08/bimodules_versus_spans.html"><em>Bimodules Versus Spans</em></a>, n-Category Café.</li>
<li>M. Shulman. <a href="https://arxiv.org/pdf/0706.1286.pdf"><em>Framed bicategories and monoidal fibrations</em></a>. arXiv: <code>0706.1286v2</code> [math.CT].</li>
<li>R. Garner and M. Shulman. <a href="https://arxiv.org/pdf/1301.3191.pdf"><em>Enriched categories as a free cocompletion</em></a>. arXiV: <code>1301.3191v2</code> [math.CT].</li>
</ul>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p><span class="math inline">x\cdot_{R^{\text{op}}}y:=y\cdot_R x</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>To construct <span class="math inline">\mathcal{C}^{\text{op}}</span> we need <span class="math inline">V</span> to be braided; to be able to compose bimodules we need cocompleteness of <span class="math inline">V</span>, with <span class="math inline">\otimes</span> cocontinuous in both arguments, etc.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>That is, of the form <span class="math inline">F^*</span> for some functor <span class="math inline">F\colon\mathcal{C}\to\mathcal{D}</span>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>That is, preserves all (small) colimits.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>If you prefer more of an article-style thing to slides then take a look at the <a href="http://www.cs.ox.ac.uk/ACT2019/preproceedings/Bryce%20Clarke.pdf">pre-proceedings</a> from ACT2019.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>Thanks again to Bryce Clarke for <a href="https://twitter.com/8ryceClarke/status/1150434205031161864">answering this question</a>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

    <!-- Comments -->
    <hr>
    <p class="black-70 i">
      Comments can be written in Markdown. To post, you must either provide a name or tick the box to comment anonymously (or, if you see yourself wanting to comment often, you can login).
    </p>
    <script defer src="https://commento.thosgood.com/js/commento.js" data-css-override="https://thosgood.com/assets/css/commento.css">
    </script>
    <div id="commento"></div>
  </div>

      </div>
    </div>
    <div id="footer-wrapper" class="h3-ns w-100 flex items-center justify-center">
  <div id="footer" class="w-60-ns w-80-m pa3 flex flex-wrap items-center f6">
    
    <div class="w-third-ns tl w-100">
      <ul class="list pl0 ma0">
        <!-- <li>Tim Hosgood</li> -->
        <!-- <li>Stockholms Universitet</li> -->
        <li><a href="mailto:tim.hosgood@posteo.net">tim.hosgood@posteo.net</a></li>
      </ul>
    </div>
    
    <div class="w-two-thirds-ns tr w-100">
      <ul class="ma0-ns fr-ns list ph0 mt3">
        <li class="ph2 di"><a href="https://twitter.com/tim_hosgood">Twitter</a></li>
        <li class="ph2 di"><a href="https://github.com/thosgood">GitHub</a></li>
        <li class="ph2 di"><a href="https://matrix.to/#/@thosgood:matrix.org">Element</a></li>
        <li class="pl2 di"><a href="https://arxiv.org/a/hosgood_t_1">arXiv</a></li>
      </ul>
    </div>

  </div>
</div>

    
      <script type="text/javascript" src="/assets/jquery-3.4.1.slim.min.js"></script>


<!-- Use KaTeX rendering for all static page content -->

<script type="text/javascript" src="/assets/katex/katex.min.js"></script>
<script type="text/javascript">
  $("span[class='math inline']").replaceWith(
    function(){
      var tex = $(this).text();
      return "<span class=\"inline-equation\">" + 
             katex.renderToString(tex, {throwOnError: false}) +
             "</span>";
  });

  $("span[class='math display']").replaceWith(
    function(){
      var tex = $(this).text();
      return "<div class=\"equation\">" + 
             katex.renderToString(tex, {displayMode: true, fleqn: true, throwOnError: false}) +
             "</div>";
  });
</script>

    

  </body>
</html><!-- Display settings (dark mode, font, etc) --><html><script type="text/javascript">
  const body = document.getElementsByTagName('body')[0];
  const content = document.getElementById('post-content');

  function lightStyle() {
    body.style.background = '#f0f8ff';
    body.style.color = 'black';
    document.getElementById('post-nav').style.background = '#eee'
    var links = document.getElementsByTagName('a');
    for (var i = 0; i < links.length; i++) {
      links[i].style.color = '#2a7ae2';
    }
  }
  function darkStyle() {
    body.style.background = '#333';
    body.style.color = '#eee';
    document.getElementById('post-nav').style.background = '#555'
    var links = document.getElementsByTagName('a');
    for (var i = 0; i < links.length; i++) {
      links[i].style.color = '#82b2ee';
    }
    var tables = document.getElementsByTagName('table');
    for (var i = 0; i < tables.length; i++) {
      tables[i].style.color = 'black';
    }
  }

  function sansStyle() {
    content.style.fontFamily = 'WorkSans';
  }
  function serifStyle() {
    content.style.fontFamily = 'Domine';
  }
</script></html>
